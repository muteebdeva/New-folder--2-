<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Fast, privacy-first image compression tool. Reduce photo file sizes with minimal quality loss. Supports JPEG, PNG, WebP formats.">
    <meta name="keywords" content="image compression, photo optimizer, reduce file size, JPEG, PNG, WebP, privacy-first">
    <meta name="author" content="Muteeb Deva">
    <meta name="theme-color" content="#00bcd4">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='45' fill='%2300bcd4'/%3E%3Ctext x='50' y='60' text-anchor='middle' fill='white' font-size='40'%3E📸%3C/text%3E%3C/svg%3E">
    <link rel="manifest" href="data:application/json,%7B%22name%22%3A%22ReduSize%22%2C%22short_name%22%3A%22ReduSize%22%2C%22description%22%3A%22Fast%20Image%20Compression%22%2C%22start_url%22%3A%22.%22%2C%22display%22%3A%22standalone%22%2C%22background_color%22%3A%22%23000000%22%2C%22theme_color%22%3A%22%2300bcd4%22%2C%22icons%22%3A%5B%7B%22src%22%3A%22data%3Aimage/svg%2Bxml%2C%253Csvg%2520xmlns%3D'http%3A//www.w3.org/2000/svg'%2520viewBox%3D'0%25200%2520192%2520192'%253E%253Ccircle%2520cx%3D'96'%2520cy%3D'96'%2520r%3D'88'%2520fill%3D'%252300bcd4'/%253E%253Ctext%2520x%3D'96'%2520y%3D'120'%2520text-anchor%3D'middle'%2520fill%3D'white'%2520font-size%3D'80'%253E📸%253C/text%253E%253C/svg%253E%22%2C%22sizes%22%3A%22192x192%22%2C%22type%22%3A%22image/svg%2Bxml%22%7D%5D%7D">
    <title>ReduSize - Fast Image Compression</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #000 0%, #1a1a1a 50%, #000 100%); color: #fff; min-height: 100vh; position: relative; overflow-x: hidden; }
        body::before { content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at 20% 80%, rgba(0,188,212,0.1) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(0,188,212,0.05) 0%, transparent 50%); pointer-events: none; z-index: -1; }
        body::after { content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,0.05) 1px, transparent 0); background-size: 20px 20px; pointer-events: none; z-index: -1; }
        
        /* Navigation */
        .nav { position: fixed; top: 0; left: 0; right: 0; background: rgba(0,0,0,0.95); backdrop-filter: blur(10px); z-index: 100; border-bottom: 1px solid #333; }
        .nav-content { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: flex; align-items: center; justify-content: space-between; height: 60px; }
        .user-menu { display: flex; align-items: center; gap: 15px; }
        .login-btn { background: #00bcd4; color: #fff; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 14px; }
        .user-avatar { width: 32px; height: 32px; border-radius: 50%; }
        .user-name { font-size: 14px; color: #fff; max-width: 120px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .user-info { display: flex; align-items: center; gap: 8px; background: rgba(0,188,212,0.1); padding: 6px 12px; border-radius: 20px; border: 1px solid rgba(0,188,212,0.2); }
        .nav-brand { font-size: 20px; font-weight: bold; color: #fff; }
        .nav-menu { display: flex; gap: 30px; }
        .nav-link { color: #ccc; text-decoration: none; font-size: 14px; transition: color 0.2s; }
        .nav-link:hover, .nav-link.active { color: #fff; }
        .theme-toggle { background: #333; border: none; color: #fff; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 12px; }
        
        /* Main Content */
        .main { margin-top: 60px; }
        .container { max-width: 500px; margin: 0 auto; padding: 40px 20px; position: relative; }
        .container::before { content: ''; position: absolute; top: -50px; left: 50%; transform: translateX(-50%); width: 200px; height: 200px; background: radial-gradient(circle, rgba(0,188,212,0.1) 0%, transparent 70%); border-radius: 50%; z-index: -1; animation: pulse 4s ease-in-out infinite; }
        @keyframes pulse { 0%, 100% { transform: translateX(-50%) scale(1); opacity: 0.5; } 50% { transform: translateX(-50%) scale(1.1); opacity: 0.8; } }
        
        /* Header */
        .header { text-align: center; margin-bottom: 40px; }
        .app-icon { width: 100px; height: 100px; background: linear-gradient(135deg, #333, #555); border-radius: 25px; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 40px; position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.5), 0 0 0 1px rgba(0,188,212,0.2); animation: iconFloat 3s ease-in-out infinite; }
        @keyframes iconFloat { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-5px); } }
        @keyframes float1 { 0%, 100% { transform: translateY(0px) rotate(0deg); } 33% { transform: translateY(-20px) rotate(120deg); } 66% { transform: translateY(10px) rotate(240deg); } }
        @keyframes float2 { 0%, 100% { transform: translateX(0px) scale(1); } 50% { transform: translateX(20px) scale(1.1); } }
        @keyframes float3 { 0%, 100% { transform: translateY(0px) translateX(0px); } 25% { transform: translateY(-15px) translateX(10px); } 75% { transform: translateY(15px) translateX(-10px); } }
        @keyframes blink { 0%, 100% { opacity: 0.2; } 50% { opacity: 0.8; } }
        .bolt { position: absolute; bottom: 10px; right: 10px; font-size: 20px; }
        h1 { font-size: 32px; font-weight: 700; color: #fff; margin-bottom: 10px; }
        .subtitle { font-size: 18px; color: #aaa; margin-bottom: 30px; line-height: 1.4; }
        
        /* Demo Card */
        .demo { background: linear-gradient(135deg, #1a1a1a, #2a2a2a); padding: 30px; border-radius: 20px; margin-bottom: 40px; text-align: center; border: 1px solid #333; position: relative; overflow: hidden; }
        .demo::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: linear-gradient(45deg, transparent, rgba(0,188,212,0.05), transparent); transform: rotate(45deg); animation: shimmer 3s linear infinite; }
        @keyframes shimmer { 0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); } 100% { transform: translateX(100%) translateY(100%) rotate(45deg); } }
        .before-after { display: flex; align-items: center; justify-content: center; gap: 20px; margin-bottom: 15px; }
        .demo-card { background: #333; padding: 20px; border-radius: 12px; min-width: 90px; border: 1px solid #444; }
        .demo-label { font-size: 12px; color: #aaa; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px; }
        .demo-size { font-size: 18px; font-weight: bold; color: #fff; }
        .arrow { font-size: 24px; color: #fff; }
        .savings { font-size: 16px; color: #4caf50; font-weight: 600; }
        
        /* Upload Area */
        .upload-area { border: 2px dashed #444; border-radius: 20px; padding: 60px 30px; text-align: center; margin-bottom: 30px; cursor: pointer; transition: all 0.3s; background: linear-gradient(135deg, #111, #1a1a1a); position: relative; overflow: hidden; }
        .upload-area::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(0,188,212,0.1), transparent); transition: left 0.5s; }
        .upload-area:hover::before { left: 100%; }
        .upload-area:hover { border-color: #666; background: #1a1a1a; }
        .upload-area.dragover { border-color: #fff; background: #222; }
        .upload-icon { font-size: 60px; margin-bottom: 20px; }
        .upload-text { font-size: 18px; color: #fff; margin-bottom: 10px; font-weight: 500; }
        .upload-hint { font-size: 14px; color: #aaa; }
        
        /* Controls */
        .controls { margin-bottom: 30px; }
        .control-group { margin-bottom: 25px; }
        .label { font-size: 16px; font-weight: 600; color: #fff; margin-bottom: 12px; display: block; }
        .slider { width: 100%; height: 6px; background: #333; border-radius: 3px; outline: none; -webkit-appearance: none; }
        .slider::-webkit-slider-thumb { -webkit-appearance: none; width: 24px; height: 24px; background: #fff; border-radius: 50%; cursor: pointer; box-shadow: 0 2px 10px rgba(0,0,0,0.3); }
        .slider-labels { display: flex; justify-content: space-between; font-size: 12px; color: #aaa; margin-top: 8px; }
        .format-buttons { display: flex; gap: 10px; }
        .format-btn { flex: 1; padding: 15px; border: 1px solid #444; background: #222; border-radius: 12px; cursor: pointer; font-size: 14px; color: #ccc; transition: all 0.2s; font-weight: 500; }
        .format-btn:hover { background: #333; border-color: #555; }
        .format-btn.active { background: #fff; color: #000; border-color: #fff; }
        
        /* Buttons */
        .compress-btn { width: 100%; background: linear-gradient(135deg, #333, #555); color: #fff; border: none; padding: 18px; border-radius: 15px; font-size: 16px; font-weight: 600; cursor: pointer; margin-bottom: 30px; transition: all 0.2s; position: relative; overflow: hidden; }
        .compress-btn::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent); transition: left 0.3s; }
        .compress-btn:hover::before { left: 100%; }
        .compress-btn:hover:not(:disabled) { background: linear-gradient(135deg, #444, #666); transform: translateY(-1px); }
        .compress-btn:disabled { background: #222; color: #666; cursor: not-allowed; }
        
        /* Progress */
        .progress { display: none; margin-bottom: 30px; }
        .progress-bar { width: 100%; height: 6px; background: #333; border-radius: 3px; overflow: hidden; margin-bottom: 12px; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #666, #fff); width: 0%; transition: width 0.3s; position: relative; }
        .progress-fill::after { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); animation: progressShine 1.5s ease-in-out infinite; }
        @keyframes progressShine { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
        .progress-text { text-align: center; font-size: 16px; color: #fff; font-weight: 500; }
        
        /* Results */
        .results { display: none; }
        .result-card { background: linear-gradient(135deg, #1a1a1a, #2a2a2a); padding: 30px; border-radius: 20px; margin-bottom: 20px; text-align: center; border: 1px solid #333; }
        .result-title { font-size: 20px; font-weight: bold; color: #fff; margin-bottom: 20px; }
        .result-stats { display: flex; align-items: center; justify-content: center; gap: 25px; margin-bottom: 15px; }
        .stat { text-align: center; }
        .stat-label { font-size: 12px; color: #aaa; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px; }
        .stat-value { font-size: 18px; font-weight: bold; color: #fff; }
        .download-btn { background: #4caf50; color: #fff; border: none; padding: 15px 30px; border-radius: 12px; cursor: pointer; font-size: 14px; font-weight: 600; margin-right: 10px; }
        .reset-btn { background: #333; color: #fff; border: 1px solid #555; padding: 15px 30px; border-radius: 12px; cursor: pointer; font-size: 14px; font-weight: 600; }
        
        /* Light Theme */
        body.light { background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 50%, #f8f9fa 100%); color: #333; }
        body.light::before { background: radial-gradient(circle at 20% 80%, rgba(0,188,212,0.08) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(0,188,212,0.04) 0%, transparent 50%); }
        body.light::after { background-image: radial-gradient(circle at 1px 1px, rgba(0,0,0,0.03) 1px, transparent 0); }
        body.light .nav { background: rgba(255,255,255,0.95); border-bottom: 1px solid #ddd; }
        body.light .nav-brand { color: #333; }
        body.light .nav-link { color: #666; }
        body.light .nav-link:hover, body.light .nav-link.active { color: #333; }
        body.light .theme-toggle { background: #f0f0f0; color: #333; }
        body.light .app-icon { background: linear-gradient(135deg, #00bcd4, #26c6da); }
        body.light h1 { color: #333; }
        body.light .subtitle { color: #666; }
        body.light .demo { background: #f8f8f8; border: 1px solid #e0e0e0; }
        body.light .demo-card { background: #fff; border: 1px solid #e0e0e0; }
        body.light .demo-label { color: #666; }
        body.light .demo-size { color: #333; }
        body.light .arrow { color: #00bcd4; }
        body.light .upload-area { border-color: #ddd; background: #fafafa; }
        body.light .upload-area:hover { border-color: #00bcd4; background: #f0fffe; }
        body.light .upload-area.dragover { border-color: #00bcd4; background: #e0fffe; }
        body.light .upload-text { color: #333; }
        body.light .upload-hint { color: #666; }
        body.light .label { color: #333; }
        body.light .slider { background: #e0e0e0; }
        body.light .slider::-webkit-slider-thumb { background: #00bcd4; }
        body.light .slider-labels { color: #666; }
        body.light .format-btn { background: #f8f8f8; color: #333; border-color: #e0e0e0; }
        body.light .format-btn:hover { background: #f0f0f0; }
        body.light .format-btn.active { background: #00bcd4; color: #fff; }
        body.light .compress-btn { background: #00bcd4; }
        body.light .compress-btn:hover:not(:disabled) { background: #26c6da; }
        body.light .compress-btn:disabled { background: #ccc; color: #999; }
        body.light .progress-bar { background: #e0e0e0; }
        body.light .progress-fill { background: #00bcd4; }
        body.light .progress-text { color: #333; }
        body.light .result-card { background: #f8f8f8; border-color: #e0e0e0; }
        body.light .result-title { color: #333; }
        body.light .stat-label { color: #666; }
        body.light .stat-value { color: #333; }
        body.light .reset-btn { background: #f8f8f8; color: #333; border-color: #e0e0e0; }
        
        /* Settings Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 200; }
        .modal-content { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #111; border-radius: 20px; padding: 30px; width: 90%; max-width: 500px; border: 1px solid #333; max-height: 80vh; overflow-y: auto; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .modal-title { font-size: 24px; font-weight: bold; color: #fff; }
        .modal-close { background: none; border: none; color: #aaa; font-size: 24px; cursor: pointer; }
        .setting-item { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid #333; }
        .setting-label { font-size: 16px; color: #fff; }
        .setting-desc { font-size: 12px; color: #aaa; margin-top: 4px; }
        .toggle-switch { position: relative; width: 50px; height: 24px; background: #333; border-radius: 12px; cursor: pointer; transition: background 0.2s; }
        .toggle-switch.active { background: #fff; }
        .toggle-slider { position: absolute; top: 2px; left: 2px; width: 20px; height: 20px; background: #666; border-radius: 50%; transition: all 0.2s; }
        .toggle-switch.active .toggle-slider { transform: translateX(26px); background: #000; }
        .select-box { background: #222; border: 1px solid #444; border-radius: 8px; padding: 8px 12px; color: #fff; font-size: 14px; }
        body.light .modal-content { background: #fff; border-color: #e0e0e0; }
        body.light .modal-title { color: #333; }
        body.light .modal-close { color: #666; }
        body.light .setting-item { border-bottom-color: #e0e0e0; }
        body.light .setting-label { color: #333; }
        body.light .setting-desc { color: #666; }
        body.light .toggle-switch { background: #e0e0e0; }
        body.light .toggle-switch.active { background: #00bcd4; }
        body.light .toggle-slider { background: #fff; }
        body.light .toggle-switch.active .toggle-slider { background: #fff; }
        body.light .select-box { background: #f8f8f8; border-color: #e0e0e0; color: #333; }
        .modal-content a { color: inherit; }
        body.light .modal-content a { color: #00bcd4; }
        kbd { background: #333; color: #fff; padding: 2px 6px; border-radius: 4px; font-size: 11px; font-family: monospace; }
        body.light kbd { background: #f0f0f0; color: #333; }
        
        /* Loading Spinner */
        .loading { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 1000; }
        .spinner { width: 40px; height: 40px; border: 4px solid #333; border-top: 4px solid #00bcd4; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* Error Messages */
        .error-toast { position: fixed; top: 80px; right: 20px; background: #f44336; color: #fff; padding: 12px 20px; border-radius: 8px; z-index: 1001; transform: translateX(100%); transition: transform 0.3s; }
        .error-toast.show { transform: translateX(0); }
        .success-toast { position: fixed; top: 80px; right: 20px; background: #4caf50; color: #fff; padding: 12px 20px; border-radius: 8px; z-index: 1001; transform: translateX(100%); transition: transform 0.3s; }
        .success-toast.show { transform: translateX(0); }
        
        /* Mobile Responsive */
        @media (max-width: 768px) {
            .nav-menu { display: none; }
            .container { padding: 20px 15px; }
            .app-icon { width: 80px; height: 80px; font-size: 32px; }
            h1 { font-size: 28px; }
            .subtitle { font-size: 16px; }
            .demo { padding: 20px; }
            .upload-area { padding: 40px 20px; }
            .upload-icon { font-size: 48px; }
            .upload-text { font-size: 16px; }
            .modal-content { width: 95%; padding: 20px; }
            .user-info { display: none; }
            .user-menu { gap: 8px; }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-content">
            <div class="nav-brand">Redu<span style="color: #00bcd4;">Size</span></div>
            <div class="nav-menu">
                <a href="#" class="nav-link active">Compress</a>
                <a href="#" class="nav-link">Batch</a>
                <a href="#" class="nav-link">Storage</a>
                <a href="#" class="nav-link">Settings</a>
                <a href="#" class="nav-link">About</a>
            </div>
            <div class="user-menu">
                <div id="loginSection">
                    <button class="login-btn" id="loginBtn">Sign In</button>
                </div>
                <div id="userSection" style="display: none;">
                    <div class="user-info">
                        <img id="userAvatar" class="user-avatar" src="" alt="User">
                        <span id="userName" class="user-name"></span>
                    </div>
                    <button class="login-btn" id="logoutBtn">Sign Out</button>
                </div>
                <button class="theme-toggle" id="themeToggle">☀️ Light</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <!-- Floating Elements -->
            <div style="position: absolute; top: 10%; right: 10%; width: 60px; height: 60px; background: rgba(0,188,212,0.1); border-radius: 50%; animation: float1 6s ease-in-out infinite;"></div>
            <div style="position: absolute; top: 60%; left: 5%; width: 40px; height: 40px; background: rgba(0,188,212,0.05); border-radius: 50%; animation: float2 8s ease-in-out infinite;"></div>
            <div style="position: absolute; bottom: 20%; right: 20%; width: 30px; height: 30px; background: rgba(0,188,212,0.08); border-radius: 50%; animation: float3 5s ease-in-out infinite;"></div>
            <div class="header">
                <div class="app-icon">
                    📸
                    <span class="bolt">⚡</span>
                </div>
                <h1>Redu<span style="color: #00bcd4; font-weight: 800;">Size</span></h1>
                <p class="subtitle">Reduce photo file size with minimal quality loss</p>
                
                <div class="demo">
                    <div class="before-after">
                        <div class="demo-card">
                            <div class="demo-label">Before</div>
                            <div class="demo-size">4.2 MB</div>
                        </div>
                        <div class="arrow">→</div>
                        <div class="demo-card">
                            <div class="demo-label">After</div>
                            <div class="demo-size">1.1 MB</div>
                        </div>
                    </div>
                    <div class="savings">Saved 72% — looks great!</div>
                </div>
            </div>

            <div class="upload-area" id="uploadArea">
                <div class="upload-icon">📷</div>
                <div class="upload-text">Drop images here or click to select</div>
                <div class="upload-hint">Supports JPEG, PNG, WebP</div>
                <input type="file" id="fileInput" accept="image/*" multiple style="display: none;">
            </div>

            <div class="controls" id="controls" style="display: none;">
                <div class="control-group">
                    <label class="label">Quality: <span id="qualityValue">80</span>%</label>
                    <input type="range" class="slider" id="qualitySlider" min="10" max="100" value="80">
                    <div class="slider-labels">
                        <span>Smaller</span>
                        <span>Better Quality</span>
                    </div>
                </div>

                <div class="control-group">
                    <label class="label">Format</label>
                    <div class="format-buttons">
                        <button class="format-btn active" data-format="jpeg">JPEG</button>
                        <button class="format-btn" data-format="png">PNG</button>
                        <button class="format-btn" data-format="webp">WebP</button>
                    </div>
                </div>
            </div>

            <button class="compress-btn" id="compressBtn" disabled>Select Images First</button>

            <div class="progress" id="progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">Compressing... 0%</div>
            </div>

            <div class="results" id="results">
                <div class="result-card">
                    <div class="result-title" id="resultTitle">Done — saved 1.2 MB</div>
                    <div class="result-stats">
                        <div class="stat">
                            <div class="stat-label">Before</div>
                            <div class="stat-value" id="originalSize">0 MB</div>
                        </div>
                        <div class="arrow">→</div>
                        <div class="stat">
                            <div class="stat-label">After</div>
                            <div class="stat-value" id="compressedSize">0 MB</div>
                        </div>
                    </div>
                    <div class="savings" id="savingsText">Saved 0% — looks great!</div>
                </div>
                
                <button class="download-btn" id="downloadBtn">Download All</button>
                <button class="reset-btn" id="resetBtn">Compress More</button>
            </div>
        </div>
        
        <!-- Documentation Section -->
        <section style="max-width: 800px; margin: 80px auto 0; padding: 0 20px;">
            <div style="text-align: center; margin-bottom: 60px;">
                <h2 style="font-size: 32px; font-weight: 700; margin-bottom: 16px; color: inherit;">How to Use ReduSize</h2>
                <p style="font-size: 18px; color: #aaa; max-width: 600px; margin: 0 auto;">Complete guide to compress your images efficiently and get the best results</p>
            </div>
            
            <!-- Quick Start -->
            <div style="background: linear-gradient(135deg, #1a1a1a, #2a2a2a); border-radius: 20px; padding: 40px; margin-bottom: 40px; border: 1px solid #333;">
                <h3 style="font-size: 24px; margin-bottom: 24px; color: inherit; display: flex; align-items: center;">🚀 Quick Start</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 24px;">
                    <div style="background: rgba(0,188,212,0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #00bcd4;">
                        <h4 style="margin-bottom: 12px; color: inherit;">1. Select Images</h4>
                        <p style="font-size: 14px; line-height: 1.6; color: #ccc;">Drag & drop images or click the upload area. Supports JPEG, PNG, and WebP formats up to 50MB each.</p>
                    </div>
                    <div style="background: rgba(0,188,212,0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #00bcd4;">
                        <h4 style="margin-bottom: 12px; color: inherit;">2. Adjust Settings</h4>
                        <p style="font-size: 14px; line-height: 1.6; color: #ccc;">Choose quality level (10-100%) and output format. Higher quality = larger file size.</p>
                    </div>
                    <div style="background: rgba(0,188,212,0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #00bcd4;">
                        <h4 style="margin-bottom: 12px; color: inherit;">3. Compress & Download</h4>
                        <p style="font-size: 14px; line-height: 1.6; color: #ccc;">Click compress and download your optimized images. All processing happens locally.</p>
                    </div>
                </div>
            </div>
            
            <!-- Features -->
            <div style="background: linear-gradient(135deg, #1a1a1a, #2a2a2a); border-radius: 20px; padding: 40px; margin-bottom: 40px; border: 1px solid #333;">
                <h3 style="font-size: 24px; margin-bottom: 24px; color: inherit; display: flex; align-items: center;">⚡ Features & Capabilities</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                    <div>
                        <h4 style="margin-bottom: 16px; color: inherit; font-size: 18px;">Compression Options</h4>
                        <ul style="list-style: none; padding: 0; margin: 0;">
                            <li style="margin-bottom: 8px; display: flex; align-items: center;"><span style="color: #00bcd4; margin-right: 8px;">✓</span> Quality control (10-100%)</li>
                            <li style="margin-bottom: 8px; display: flex; align-items: center;"><span style="color: #00bcd4; margin-right: 8px;">✓</span> Multiple formats (JPEG, PNG, WebP)</li>
                            <li style="margin-bottom: 8px; display: flex; align-items: center;"><span style="color: #00bcd4; margin-right: 8px;">✓</span> Batch processing</li>
                            <li style="margin-bottom: 8px; display: flex; align-items: center;"><span style="color: #00bcd4; margin-right: 8px;">✓</span> Size optimization</li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="margin-bottom: 16px; color: inherit; font-size: 18px;">Privacy & Security</h4>
                        <ul style="list-style: none; padding: 0; margin: 0;">
                            <li style="margin-bottom: 8px; display: flex; align-items: center;"><span style="color: #00bcd4; margin-right: 8px;">✓</span> 100% local processing</li>
                            <li style="margin-bottom: 8px; display: flex; align-items: center;"><span style="color: #00bcd4; margin-right: 8px;">✓</span> No server uploads</li>
                            <li style="margin-bottom: 8px; display: flex; align-items: center;"><span style="color: #00bcd4; margin-right: 8px;">✓</span> No data collection</li>
                            <li style="margin-bottom: 8px; display: flex; align-items: center;"><span style="color: #00bcd4; margin-right: 8px;">✓</span> Works offline</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Quality Guide -->
            <div style="background: linear-gradient(135deg, #1a1a1a, #2a2a2a); border-radius: 20px; padding: 40px; margin-bottom: 40px; border: 1px solid #333;">
                <h3 style="font-size: 24px; margin-bottom: 24px; color: inherit; display: flex; align-items: center;">🎯 Quality Settings Guide</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div style="background: rgba(255,0,0,0.1); padding: 20px; border-radius: 12px; text-align: center;">
                        <div style="font-size: 24px; margin-bottom: 12px;">📱</div>
                        <h4 style="margin-bottom: 8px; color: inherit;">Web/Social (60-70%)</h4>
                        <p style="font-size: 13px; color: #ccc;">Perfect for social media, websites, and online sharing</p>
                    </div>
                    <div style="background: rgba(255,165,0,0.1); padding: 20px; border-radius: 12px; text-align: center;">
                        <div style="font-size: 24px; margin-bottom: 12px;">⚖️</div>
                        <h4 style="margin-bottom: 8px; color: inherit;">Balanced (80-85%)</h4>
                        <p style="font-size: 13px; color: #ccc;">Good balance between quality and file size</p>
                    </div>
                    <div style="background: rgba(0,255,0,0.1); padding: 20px; border-radius: 12px; text-align: center;">
                        <div style="font-size: 24px; margin-bottom: 12px;">🎨</div>
                        <h4 style="margin-bottom: 8px; color: inherit;">High Quality (90-95%)</h4>
                        <p style="font-size: 13px; color: #ccc;">For professional use and print materials</p>
                    </div>
                </div>
            </div>
            
            <!-- FAQ -->
            <div style="background: linear-gradient(135deg, #1a1a1a, #2a2a2a); border-radius: 20px; padding: 40px; margin-bottom: 60px; border: 1px solid #333;">
                <h3 style="font-size: 24px; margin-bottom: 24px; color: inherit; display: flex; align-items: center;">❓ Frequently Asked Questions</h3>
                <div style="space-y: 20px;">
                    <div style="margin-bottom: 20px;">
                        <h4 style="margin-bottom: 8px; color: inherit; font-size: 16px;">Is my data safe?</h4>
                        <p style="font-size: 14px; color: #ccc; line-height: 1.6;">Yes! All image processing happens locally in your browser. No images are uploaded to any server.</p>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <h4 style="margin-bottom: 8px; color: inherit; font-size: 16px;">What file formats are supported?</h4>
                        <p style="font-size: 14px; color: #ccc; line-height: 1.6;">JPEG, PNG, and WebP formats are fully supported. Maximum file size is 50MB per image.</p>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <h4 style="margin-bottom: 8px; color: inherit; font-size: 16px;">How many images can I compress at once?</h4>
                        <p style="font-size: 14px; color: #ccc; line-height: 1.6;">You can select and compress multiple images simultaneously. The limit depends on your device's memory.</p>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <h4 style="margin-bottom: 8px; color: inherit; font-size: 16px;">Does it work offline?</h4>
                        <p style="font-size: 14px; color: #ccc; line-height: 1.6;">Yes! Once loaded, ReduSize works completely offline since all processing is done locally.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Footer -->
        <footer style="text-align: center; padding: 40px 20px; border-top: 1px solid #333; margin-top: 60px;">
            <p style="color: #666; font-size: 14px; margin-bottom: 10px;">© 2024 ReduSize by Muteeb Deva. All rights reserved.</p>
            <p style="color: #666; font-size: 12px;">Privacy-first image compression • No data collection • Local processing only</p>
        </footer>
    </main>
    
    <!-- Loading Spinner -->
    <div class="loading" id="loadingSpinner">
        <div class="spinner"></div>
    </div>
    
    <!-- Toast Messages -->
    <div class="error-toast" id="errorToast"></div>
    <div class="success-toast" id="successToast"></div>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h2 class="modal-title">Sign In to ReduSize</h2>
                <button class="modal-close" id="closeLogin">×</button>
            </div>
            
            <div style="padding: 20px 0;">
                <p style="margin-bottom: 30px; color: #aaa; text-align: center;">Sign in to save your settings and access premium features</p>
                
                <form id="loginForm">
                    <div style="margin-bottom: 16px;">
                        <label style="display: block; margin-bottom: 6px; font-size: 14px; color: inherit;">Email</label>
                        <input type="email" id="loginEmail" required style="width: 100%; padding: 12px; border: 1px solid #444; border-radius: 8px; background: #222; color: #fff; font-size: 14px;" placeholder="Enter your email">
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 6px; font-size: 14px; color: inherit;">Password</label>
                        <input type="password" id="loginPassword" required style="width: 100%; padding: 12px; border: 1px solid #444; border-radius: 8px; background: #222; color: #fff; font-size: 14px;" placeholder="Enter your password">
                    </div>
                    
                    <button type="submit" style="width: 100%; background: #00bcd4; color: #fff; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-size: 14px; margin-bottom: 12px;">
                        Sign In
                    </button>
                </form>
                
                <div style="text-align: center; margin: 20px 0;">
                    <span style="font-size: 12px; color: #666;">Don't have an account? </span>
                    <button id="showSignup" style="background: none; border: none; color: #00bcd4; cursor: pointer; font-size: 12px; text-decoration: underline;">Sign Up</button>
                </div>
                
                <div style="margin: 20px 0; position: relative;">
                    <div style="height: 1px; background: #333; margin: 0 20px;"></div>
                    <span style="position: absolute; top: -8px; left: 50%; transform: translateX(-50%); background: inherit; padding: 0 15px; font-size: 12px; color: #666;">or</span>
                </div>
                
                <button id="guestMode" style="width: 100%; background: transparent; color: #00bcd4; border: 1px solid #00bcd4; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-size: 14px;">
                    Continue as Guest
                </button>
                
                <p style="font-size: 11px; color: #666; margin-top: 20px; line-height: 1.4; text-align: center;">By signing in, you agree to our Terms of Service and Privacy Policy. Your images are always processed locally.</p>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Settings</h2>
                <button class="modal-close" id="closeSettings">×</button>
            </div>
            
            <div class="setting-item">
                <div>
                    <div class="setting-label">Dark Mode</div>
                    <div class="setting-desc">Switch between light and dark theme</div>
                </div>
                <div class="toggle-switch" id="darkModeToggle">
                    <div class="toggle-slider"></div>
                </div>
            </div>
            
            <div class="setting-item">
                <div>
                    <div class="setting-label">Default Quality</div>
                    <div class="setting-desc">Set default compression quality</div>
                </div>
                <select class="select-box" id="defaultQuality">
                    <option value="60">60% (Small files)</option>
                    <option value="80" selected>80% (Balanced)</option>
                    <option value="95">95% (High quality)</option>
                </select>
            </div>
            
            <div class="setting-item">
                <div>
                    <div class="setting-label">Auto Download</div>
                    <div class="setting-desc">Automatically download compressed images</div>
                </div>
                <div class="toggle-switch" id="autoDownloadToggle">
                    <div class="toggle-slider"></div>
                </div>
            </div>
            
            <div class="setting-item">
                <div>
                    <div class="setting-label">Max Image Size</div>
                    <div class="setting-desc">Maximum dimensions for compressed images</div>
                </div>
                <select class="select-box" id="maxSize">
                    <option value="1080">1080px</option>
                    <option value="1920">1920px</option>
                    <option value="2560">2560px</option>
                    <option value="original">Original size</option>
                </select>
            </div>
            
            <div class="setting-item" style="border-bottom: none;">
                <div>
                    <div class="setting-label">Preserve Metadata</div>
                    <div class="setting-desc">Keep EXIF data in compressed images</div>
                </div>
                <div class="toggle-switch" id="preserveMetaToggle">
                    <div class="toggle-slider"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div class="modal" id="aboutModal">
        <div class="modal-content" style="max-width: 600px; max-height: 85vh; overflow-y: auto;">
            <div class="modal-header">
                <h2 class="modal-title">About ReduSize</h2>
                <button class="modal-close" id="closeAbout">×</button>
            </div>
            
            <div style="padding: 20px 0;">
                <!-- App Header -->
                <div style="text-align: center; margin-bottom: 40px;">
                    <div class="app-icon" style="margin: 0 auto 20px; width: 120px; height: 120px; font-size: 50px;">
                        📸
                        <span class="bolt" style="font-size: 24px;">⚡</span>
                    </div>
                    <h3 style="font-size: 28px; margin-bottom: 8px; color: inherit; font-weight: 700;">Redu<span style="color: #00bcd4; font-weight: 800;">Size</span></h3>
                    <p style="color: #aaa; font-size: 16px; margin-bottom: 10px;">Professional Image Compression Tool</p>
                    <div style="display: inline-block; background: #00bcd4; color: #fff; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600;">v1.0.0</div>
                </div>
                
                <!-- Description -->
                <div style="text-align: left; margin-bottom: 35px;">
                    <p style="margin-bottom: 20px; line-height: 1.7; font-size: 16px; color: inherit;">A powerful, privacy-focused image compression web application designed for photographers, content creators, and anyone who needs to optimize images quickly and efficiently.</p>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                        <div>
                            <h4 style="margin-bottom: 12px; color: inherit; font-size: 16px;">🚀 Core Features</h4>
                            <ul style="margin-left: 0; list-style: none; line-height: 1.6; font-size: 14px;">
                                <li style="margin-bottom: 6px;">✓ Drag & drop interface</li>
                                <li style="margin-bottom: 6px;">✓ Batch processing</li>
                                <li style="margin-bottom: 6px;">✓ Real-time preview</li>
                                <li style="margin-bottom: 6px;">✓ Multiple formats</li>
                            </ul>
                        </div>
                        <div>
                            <h4 style="margin-bottom: 12px; color: inherit; font-size: 16px;">🔒 Privacy & Security</h4>
                            <ul style="margin-left: 0; list-style: none; line-height: 1.6; font-size: 14px;">
                                <li style="margin-bottom: 6px;">✓ 100% local processing</li>
                                <li style="margin-bottom: 6px;">✓ No server uploads</li>
                                <li style="margin-bottom: 6px;">✓ No data collection</li>
                                <li style="margin-bottom: 6px;">✓ Offline capable</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div style="background: rgba(0,188,212,0.1); border-left: 4px solid #00bcd4; padding: 15px; border-radius: 8px; margin-bottom: 25px;">
                        <h4 style="margin-bottom: 8px; color: inherit; font-size: 14px;">💡 Pro Tip</h4>
                        <p style="margin: 0; font-size: 13px; line-height: 1.5;">Use keyboard shortcuts: <kbd style="background: #333; color: #fff; padding: 2px 6px; border-radius: 4px; font-size: 11px;">Ctrl+O</kbd> to open files, <kbd style="background: #333; color: #fff; padding: 2px 6px; border-radius: 4px; font-size: 11px;">Ctrl+S</kbd> to download results</p>
                    </div>
                </div>
                
                <!-- Developer Section -->
                <div style="background: linear-gradient(135deg, rgba(0,188,212,0.1), rgba(0,188,212,0.05)); padding: 25px; border-radius: 16px; margin-bottom: 25px; border: 1px solid rgba(0,188,212,0.2);">
                    <div style="display: flex; align-items: center; margin-bottom: 20px;">
                        <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #00bcd4, #26c6da); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; margin-right: 20px;">👨‍💻</div>
                        <div>
                            <h4 style="margin-bottom: 4px; color: inherit; font-size: 18px; font-weight: 600;">Muteeb Deva</h4>
                            <p style="margin: 0; color: #aaa; font-size: 14px;">Full Stack Developer & UI/UX Designer</p>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                        <div style="display: flex; align-items: center;">
                            <span style="margin-right: 10px; font-size: 16px;">📧</span>
                            <a href="mailto:devamuteeb@gmail.com" style="color: #00bcd4; text-decoration: none; font-size: 14px; font-weight: 500;">devamuteeb@gmail.com</a>
                        </div>
                        <div style="display: flex; align-items: center;">
                            <span style="margin-right: 10px; font-size: 16px;">🌐</span>
                            <span style="color: inherit; font-size: 14px;">Web Developer</span>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <span style="background: rgba(0,188,212,0.2); color: #00bcd4; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 600;">React</span>
                        <span style="background: rgba(0,188,212,0.2); color: #00bcd4; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 600;">JavaScript</span>
                        <span style="background: rgba(0,188,212,0.2); color: #00bcd4; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 600;">UI/UX Design</span>
                        <span style="background: rgba(0,188,212,0.2); color: #00bcd4; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 600;">Mobile Apps</span>
                    </div>
                </div>
                
                <!-- Technical Info -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);">
                        <h4 style="margin-bottom: 12px; color: inherit; font-size: 14px; display: flex; align-items: center;">⚡ Performance</h4>
                        <ul style="margin: 0; padding: 0; list-style: none; font-size: 12px; line-height: 1.6;">
                            <li style="margin-bottom: 4px;">• Canvas API compression</li>
                            <li style="margin-bottom: 4px;">• WebP support</li>
                            <li style="margin-bottom: 4px;">• Batch processing</li>
                            <li>• Memory optimized</li>
                        </ul>
                    </div>
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);">
                        <h4 style="margin-bottom: 12px; color: inherit; font-size: 14px; display: flex; align-items: center;">🛠️ Technology</h4>
                        <ul style="margin: 0; padding: 0; list-style: none; font-size: 12px; line-height: 1.6;">
                            <li style="margin-bottom: 4px;">• Vanilla JavaScript</li>
                            <li style="margin-bottom: 4px;">• HTML5 Canvas</li>
                            <li style="margin-bottom: 4px;">• CSS3 Grid/Flexbox</li>
                            <li>• Progressive Web App</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Footer -->
                <div style="text-align: center; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
                    <p style="margin-bottom: 10px; font-size: 13px; color: #aaa;">Built with ❤️ for the creative community</p>
                    <p style="font-size: 11px; color: #666;">© 2024 Muteeb Deva. All rights reserved. | Privacy-first design</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Batch Modal -->
    <div class="modal" id="batchModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Batch Processing</h2>
                <button class="modal-close" id="closeBatch">×</button>
            </div>
            
            <div style="padding: 20px 0;">
                <div style="text-align: center; margin-bottom: 30px;">
                    <div style="font-size: 48px; margin-bottom: 16px;">📦</div>
                    <h3 style="margin-bottom: 10px; color: inherit;">Batch Compression</h3>
                    <p style="color: #aaa;">Process multiple images with the same settings</p>
                </div>
                
                <div class="setting-item">
                    <div>
                        <div class="setting-label">Batch Quality</div>
                        <div class="setting-desc">Quality for all images in batch</div>
                    </div>
                    <select class="select-box" id="batchQuality">
                        <option value="60">60% (Small files)</option>
                        <option value="80" selected>80% (Balanced)</option>
                        <option value="95">95% (High quality)</option>
                    </select>
                </div>
                
                <div class="setting-item">
                    <div>
                        <div class="setting-label">Batch Format</div>
                        <div class="setting-desc">Output format for all images</div>
                    </div>
                    <select class="select-box" id="batchFormat">
                        <option value="jpeg" selected>JPEG</option>
                        <option value="png">PNG</option>
                        <option value="webp">WebP</option>
                    </select>
                </div>
                
                <div class="setting-item" style="border-bottom: none;">
                    <div>
                        <div class="setting-label">Add Suffix</div>
                        <div class="setting-desc">Add '_compressed' to filenames</div>
                    </div>
                    <div class="toggle-switch active" id="batchSuffixToggle">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                
                <button class="compress-btn" style="margin-top: 20px;" onclick="applyBatchSettings()">Apply Batch Settings</button>
            </div>
        </div>
    </div>

    <!-- Storage Modal -->
    <div class="modal" id="storageModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Storage & History</h2>
                <button class="modal-close" id="closeStorage">×</button>
            </div>
            
            <div style="padding: 20px 0;">
                <div style="text-align: center; margin-bottom: 30px;">
                    <div style="font-size: 48px; margin-bottom: 16px;">💾</div>
                    <h3 style="margin-bottom: 10px; color: inherit;">Compression History</h3>
                    <p style="color: #aaa;">View and manage your compressed images</p>
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div style="color: inherit; font-weight: 600;">Recent Compressions</div>
                    <button id="clearHistory" style="background: #f44336; color: #fff; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 12px;">Clear All</button>
                </div>
                
                <div id="historyList" style="max-height: 300px; overflow-y: auto;">
                    <!-- History items will be populated here -->
                </div>
                
                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #333;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span style="color: #aaa;">Total Images Compressed:</span>
                        <span id="totalCompressed" style="color: inherit; font-weight: 600;">0</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: #aaa;">Total Space Saved:</span>
                        <span id="totalSaved" style="color: #4caf50; font-weight: 600;">0 MB</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const fileInput = document.getElementById('fileInput');
        const uploadArea = document.getElementById('uploadArea');
        const controls = document.getElementById('controls');
        const compressBtn = document.getElementById('compressBtn');
        const progress = document.getElementById('progress');
        const results = document.getElementById('results');
        const qualitySlider = document.getElementById('qualitySlider');
        const qualityValue = document.getElementById('qualityValue');
        const themeToggle = document.getElementById('themeToggle');
        
        let selectedFiles = [];
        let compressedFiles = [];
        let currentFormat = 'jpeg';

        // Theme toggle
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('light');
            themeToggle.textContent = document.body.classList.contains('light') ? '🌙 Dark' : '☀️ Light';
        });

        // User Authentication
        let currentUser = null;
        
        // Check for saved user
        const savedUser = localStorage.getItem('redusize_user');
        if (savedUser) {
            currentUser = JSON.parse(savedUser);
            showUserSection();
        }
        
        // Login functionality
        document.getElementById('loginBtn').addEventListener('click', () => {
            document.getElementById('loginModal').style.display = 'block';
        });
        
        document.getElementById('closeLogin').addEventListener('click', () => {
            document.getElementById('loginModal').style.display = 'none';
        });
        
        // Simple login system
        const users = JSON.parse(localStorage.getItem('redusize_users') || '{}');
        
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (users[email] && users[email].password === password) {
                currentUser = {
                    name: users[email].name,
                    email: email,
                    avatar: generateAvatar(users[email].name)
                };
                localStorage.setItem('redusize_user', JSON.stringify(currentUser));
                showUserSection();
                document.getElementById('loginModal').style.display = 'none';
            } else {
                alert('Invalid email or password');
            }
        });
        
        document.getElementById('showSignup').addEventListener('click', () => {
            showSignupForm();
        });
        
        function showSignupForm() {
            document.getElementById('loginForm').innerHTML = `
                <div style="margin-bottom: 16px;">
                    <label style="display: block; margin-bottom: 6px; font-size: 14px; color: inherit;">Name</label>
                    <input type="text" id="signupName" required style="width: 100%; padding: 12px; border: 1px solid #444; border-radius: 8px; background: #222; color: #fff; font-size: 14px;" placeholder="Enter your name">
                </div>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; margin-bottom: 6px; font-size: 14px; color: inherit;">Email</label>
                    <input type="email" id="signupEmail" required style="width: 100%; padding: 12px; border: 1px solid #444; border-radius: 8px; background: #222; color: #fff; font-size: 14px;" placeholder="Enter your email">
                </div>
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 6px; font-size: 14px; color: inherit;">Password</label>
                    <input type="password" id="signupPassword" required style="width: 100%; padding: 12px; border: 1px solid #444; border-radius: 8px; background: #222; color: #fff; font-size: 14px;" placeholder="Create a password">
                </div>
                <button type="submit" style="width: 100%; background: #00bcd4; color: #fff; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-size: 14px; margin-bottom: 12px;">
                    Sign Up
                </button>
            `;
            
            document.getElementById('loginForm').onsubmit = (e) => {
                e.preventDefault();
                const name = document.getElementById('signupName').value;
                const email = document.getElementById('signupEmail').value;
                const password = document.getElementById('signupPassword').value;
                
                if (users[email]) {
                    alert('Email already exists');
                    return;
                }
                
                users[email] = { name, password };
                localStorage.setItem('redusize_users', JSON.stringify(users));
                
                currentUser = {
                    name: name,
                    email: email,
                    avatar: generateAvatar(name)
                };
                localStorage.setItem('redusize_user', JSON.stringify(currentUser));
                showUserSection();
                document.getElementById('loginModal').style.display = 'none';
            };
            
            document.querySelector('#showSignup').textContent = 'Back to Sign In';
            document.querySelector('#showSignup').onclick = () => location.reload();
        }
        
        function generateAvatar(name) {
            const colors = ['#00bcd4', '#4caf50', '#ff9800', '#f44336', '#9c27b0', '#3f51b5'];
            const color = colors[name.length % colors.length];
            const initials = name.split(' ').map(n => n[0]).join('').toUpperCase();
            return `data:image/svg+xml;base64,${btoa(`<svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><circle cx="16" cy="16" r="16" fill="${color}"/><text x="16" y="20" text-anchor="middle" fill="white" font-family="Arial" font-size="12" font-weight="bold">${initials}</text></svg>`)}`;
        }
        
        document.getElementById('guestMode').addEventListener('click', () => {
            document.getElementById('loginModal').style.display = 'none';
        });
        
        document.getElementById('logoutBtn').addEventListener('click', () => {
            currentUser = null;
            localStorage.removeItem('redusize_user');
            showLoginSection();
        });
        
        function showUserSection() {
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('userSection').style.display = 'flex';
            document.getElementById('userAvatar').src = currentUser.avatar;
            document.getElementById('userName').textContent = currentUser.name;
        }
        
        function showLoginSection() {
            document.getElementById('loginSection').style.display = 'block';
            document.getElementById('userSection').style.display = 'none';
        }
        
        // Settings
        let settings = {
            darkMode: true,
            defaultQuality: 80,
            autoDownload: false,
            maxSize: 1080,
            preserveMeta: false
        };

        // Load settings from localStorage
        const savedSettings = localStorage.getItem('compressSettings');
        if (savedSettings) {
            settings = { ...settings, ...JSON.parse(savedSettings) };
        }

        // Apply saved settings
        if (!settings.darkMode) {
            document.body.classList.add('light');
            themeToggle.textContent = '🌙 Dark';
        }
        qualitySlider.value = settings.defaultQuality;
        qualityValue.textContent = settings.defaultQuality;

        // Navigation
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                document.querySelector('.nav-link.active').classList.remove('active');
                link.classList.add('active');
                
                if (link.textContent === 'Settings') {
                    document.getElementById('settingsModal').style.display = 'block';
                    updateSettingsUI();
                } else if (link.textContent === 'About') {
                    document.getElementById('aboutModal').style.display = 'block';
                } else if (link.textContent === 'Batch') {
                    document.getElementById('batchModal').style.display = 'block';
                } else if (link.textContent === 'Storage') {
                    document.getElementById('storageModal').style.display = 'block';
                    loadCompressionHistory();
                } else if (link.textContent === 'Compress') {
                    // Reset to main compress view
                    reset();
                }
            });
        });

        // Modal Controls
        document.getElementById('closeSettings').addEventListener('click', () => {
            document.getElementById('settingsModal').style.display = 'none';
        });
        
        document.getElementById('closeAbout').addEventListener('click', () => {
            document.getElementById('aboutModal').style.display = 'none';
        });
        
        document.getElementById('closeBatch').addEventListener('click', () => {
            document.getElementById('batchModal').style.display = 'none';
        });
        
        document.getElementById('closeStorage').addEventListener('click', () => {
            document.getElementById('storageModal').style.display = 'none';
        });

        // Close modals when clicking outside
        ['settingsModal', 'aboutModal', 'batchModal', 'loginModal', 'storageModal'].forEach(modalId => {
            document.getElementById(modalId).addEventListener('click', (e) => {
                if (e.target.id === modalId) {
                    document.getElementById(modalId).style.display = 'none';
                }
            });
        });

        // Settings Controls
        document.getElementById('darkModeToggle').addEventListener('click', () => {
            settings.darkMode = !settings.darkMode;
            document.body.classList.toggle('light');
            themeToggle.textContent = settings.darkMode ? '☀️ Light' : '🌙 Dark';
            updateSettingsUI();
            saveSettings();
        });

        document.getElementById('defaultQuality').addEventListener('change', (e) => {
            settings.defaultQuality = parseInt(e.target.value);
            qualitySlider.value = settings.defaultQuality;
            qualityValue.textContent = settings.defaultQuality;
            saveSettings();
        });

        document.getElementById('autoDownloadToggle').addEventListener('click', () => {
            settings.autoDownload = !settings.autoDownload;
            updateSettingsUI();
            saveSettings();
        });

        document.getElementById('maxSize').addEventListener('change', (e) => {
            settings.maxSize = e.target.value === 'original' ? 'original' : parseInt(e.target.value);
            saveSettings();
        });

        document.getElementById('preserveMetaToggle').addEventListener('click', () => {
            settings.preserveMeta = !settings.preserveMeta;
            updateSettingsUI();
            saveSettings();
        });

        function updateSettingsUI() {
            document.getElementById('darkModeToggle').classList.toggle('active', settings.darkMode);
            document.getElementById('autoDownloadToggle').classList.toggle('active', settings.autoDownload);
            document.getElementById('preserveMetaToggle').classList.toggle('active', settings.preserveMeta);
            document.getElementById('defaultQuality').value = settings.defaultQuality;
            document.getElementById('maxSize').value = settings.maxSize;
        }

        function saveSettings() {
            localStorage.setItem('compressSettings', JSON.stringify(settings));
        }
        
        // Batch Processing
        let batchSettings = {
            quality: 80,
            format: 'jpeg',
            addSuffix: true
        };
        
        document.getElementById('batchSuffixToggle').addEventListener('click', () => {
            batchSettings.addSuffix = !batchSettings.addSuffix;
            document.getElementById('batchSuffixToggle').classList.toggle('active', batchSettings.addSuffix);
        });
        
        function applyBatchSettings() {
            batchSettings.quality = parseInt(document.getElementById('batchQuality').value);
            batchSettings.format = document.getElementById('batchFormat').value;
            
            // Apply to main controls
            qualitySlider.value = batchSettings.quality;
            qualityValue.textContent = batchSettings.quality;
            
            // Set format
            document.querySelector('.format-btn.active').classList.remove('active');
            document.querySelector(`[data-format="${batchSettings.format}"]`).classList.add('active');
            currentFormat = batchSettings.format;
            
            // Close modal
            document.getElementById('batchModal').style.display = 'none';
            
            // Show success message
            const originalText = compressBtn.textContent;
            compressBtn.textContent = 'Batch Settings Applied!';
            setTimeout(() => {
                compressBtn.textContent = originalText;
            }, 2000);
        }

        // File selection
        uploadArea.addEventListener('click', () => fileInput.click());
        fileInput.addEventListener('change', handleFiles);
        
        // Drag and drop
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });
        uploadArea.addEventListener('dragleave', () => uploadArea.classList.remove('dragover'));
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            handleFiles({ target: { files: e.dataTransfer.files } });
        });

        // Quality slider
        qualitySlider.addEventListener('input', (e) => {
            qualityValue.textContent = e.target.value;
        });

        // Format buttons
        document.querySelectorAll('.format-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelector('.format-btn.active').classList.remove('active');
                btn.classList.add('active');
                currentFormat = btn.dataset.format;
            });
        });

        // Compress button
        compressBtn.addEventListener('click', compressImages);
        
        // Reset button
        document.getElementById('resetBtn').addEventListener('click', reset);
        
        // Download button
        document.getElementById('downloadBtn').addEventListener('click', downloadAll);

        function handleFiles(e) {
            selectedFiles = Array.from(e.target.files).filter(file => file.type.startsWith('image/'));
            
            if (selectedFiles.length > 0) {
                controls.style.display = 'block';
                compressBtn.disabled = false;
                compressBtn.textContent = `Compress ${selectedFiles.length} Image${selectedFiles.length > 1 ? 's' : ''}`;
                
                uploadArea.innerHTML = `
                    <div class="upload-icon">✓</div>
                    <div class="upload-text">${selectedFiles.length} image${selectedFiles.length > 1 ? 's' : ''} selected</div>
                    <div class="upload-hint">Click to select different images</div>
                `;
            }
        }

        async function compressImages() {
            try {
                document.getElementById('loadingSpinner').style.display = 'flex';
                progress.style.display = 'block';
                compressBtn.disabled = true;
                compressedFiles = [];
                
                const quality = qualitySlider.value / 100;
                
                for (let i = 0; i < selectedFiles.length; i++) {
                    const file = selectedFiles[i];
                    const progressPercent = Math.round((i / selectedFiles.length) * 100);
                    
                    document.getElementById('progressFill').style.width = progressPercent + '%';
                    document.getElementById('progressText').textContent = `Compressing... ${progressPercent}%`;
                    
                    try {
                        const compressed = await compressFile(file, quality);
                        compressedFiles.push(compressed);
                    } catch (error) {
                        console.error('Compression failed:', error);
                    }
                    
                    await new Promise(resolve => setTimeout(resolve, 100));
                }
                
                document.getElementById('progressFill').style.width = '100%';
                document.getElementById('progressText').textContent = 'Compression complete!';
                
                setTimeout(() => {
                    document.getElementById('loadingSpinner').style.display = 'none';
                    showResults();
                    showToast(`Successfully compressed ${compressedFiles.length} image${compressedFiles.length > 1 ? 's' : ''}!`);
                }, 500);
            } catch (error) {
                document.getElementById('loadingSpinner').style.display = 'none';
                showToast('Compression failed. Please try again.', 'error');
            }
        }

        function compressFile(file, quality) {
            return new Promise((resolve) => {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const img = new Image();
                
                img.onload = () => {
                    const maxWidth = settings.maxSize === 'original' ? img.width : settings.maxSize;
                    const maxHeight = settings.maxSize === 'original' ? img.height : settings.maxSize;
                    
                    let { width, height } = img;
                    
                    if (width > maxWidth || height > maxHeight) {
                        const ratio = Math.min(maxWidth / width, maxHeight / height);
                        width *= ratio;
                        height *= ratio;
                    }
                    
                    canvas.width = width;
                    canvas.height = height;
                    
                    ctx.drawImage(img, 0, 0, width, height);
                    
                    canvas.toBlob((blob) => {
                        resolve({
                            original: file,
                            compressed: blob,
                            originalSize: file.size,
                            compressedSize: blob.size,
                            name: batchSettings.addSuffix ? 
                                file.name.replace(/\.[^/.]+$/, `_compressed.${currentFormat === 'jpeg' ? 'jpg' : currentFormat}`) :
                                file.name.replace(/\.[^/.]+$/, `.${currentFormat === 'jpeg' ? 'jpg' : currentFormat}`)
                        });
                    }, `image/${currentFormat}`, quality);
                };
                
                img.src = URL.createObjectURL(file);
            });
        }

        function showResults() {
            progress.style.display = 'none';
            results.style.display = 'block';
            
            const totalOriginal = compressedFiles.reduce((sum, file) => sum + file.originalSize, 0);
            const totalCompressed = compressedFiles.reduce((sum, file) => sum + file.compressedSize, 0);
            const savings = Math.round(((totalOriginal - totalCompressed) / totalOriginal) * 100);
            const savedBytes = totalOriginal - totalCompressed;
            
            document.getElementById('originalSize').textContent = formatFileSize(totalOriginal);
            document.getElementById('compressedSize').textContent = formatFileSize(totalCompressed);
            document.getElementById('savingsText').textContent = `Saved ${savings}% — looks great!`;
            document.getElementById('resultTitle').textContent = `Done — saved ${formatFileSize(savedBytes)}`;
            
            // Save to history
            saveToHistory({
                date: new Date().toISOString(),
                fileCount: compressedFiles.length,
                originalSize: totalOriginal,
                compressedSize: totalCompressed,
                savings: savings,
                savedBytes: savedBytes,
                format: currentFormat,
                quality: qualitySlider.value
            });
            
            // Auto download if enabled
            if (settings.autoDownload) {
                setTimeout(downloadAll, 1000);
            }
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 B';
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
        }

        function downloadAll() {
            compressedFiles.forEach(file => {
                const url = URL.createObjectURL(file.compressed);
                const a = document.createElement('a');
                a.href = url;
                a.download = file.name;
                a.click();
                URL.revokeObjectURL(url);
            });
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey || e.metaKey) {
                if (e.key === 'o') {
                    e.preventDefault();
                    fileInput.click();
                } else if (e.key === 's') {
                    e.preventDefault();
                    if (compressedFiles.length > 0) {
                        downloadAll();
                    }
                }
            }
            if (e.key === 'Escape') {
                ['settingsModal', 'aboutModal', 'batchModal', 'loginModal', 'storageModal'].forEach(modalId => {
                    document.getElementById(modalId).style.display = 'none';
                });
            }
        });
        
        function reset() {
            selectedFiles = [];
            compressedFiles = [];
            controls.style.display = 'none';
            progress.style.display = 'none';
            results.style.display = 'none';
            compressBtn.disabled = true;
            compressBtn.textContent = 'Select Images First';
            
            uploadArea.innerHTML = `
                <div class="upload-icon">📷</div>
                <div class="upload-text">Drop images here or click to select</div>
                <div class="upload-hint">Supports JPEG, PNG, WebP</div>
            `;
            
            fileInput.value = '';
            
            // Reset navigation to Compress
            document.querySelector('.nav-link.active').classList.remove('active');
            document.querySelector('.nav-link').classList.add('active');
        }
        
        // Toast notifications
        function showToast(message, type = 'success') {
            const toast = document.getElementById(type + 'Toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }
        
        // Error handling
        window.addEventListener('error', (e) => {
            showToast('An error occurred. Please try again.', 'error');
        });
        
        // Service Worker for PWA
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('data:application/javascript,const CACHE_NAME="redusize-v1";self.addEventListener("install",e=>{e.waitUntil(caches.open(CACHE_NAME))});self.addEventListener("fetch",e=>{e.respondWith(caches.match(e.request).then(response=>response||fetch(e.request)))});').catch(() => {});
        }
        
        // Storage & History Management
        function saveToHistory(compressionData) {
            let history = JSON.parse(localStorage.getItem('redusize_history') || '[]');
            history.unshift(compressionData);
            if (history.length > 50) history = history.slice(0, 50); // Keep only last 50
            localStorage.setItem('redusize_history', JSON.stringify(history));
        }
        
        function loadCompressionHistory() {
            const history = JSON.parse(localStorage.getItem('redusize_history') || '[]');
            const historyList = document.getElementById('historyList');
            
            if (history.length === 0) {
                historyList.innerHTML = '<div style="text-align: center; color: #666; padding: 40px;">No compression history yet</div>';
                document.getElementById('totalCompressed').textContent = '0';
                document.getElementById('totalSaved').textContent = '0 MB';
                return;
            }
            
            const totalFiles = history.reduce((sum, item) => sum + item.fileCount, 0);
            const totalSaved = history.reduce((sum, item) => sum + item.savedBytes, 0);
            
            document.getElementById('totalCompressed').textContent = totalFiles;
            document.getElementById('totalSaved').textContent = formatFileSize(totalSaved);
            
            historyList.innerHTML = history.map(item => {
                const date = new Date(item.date).toLocaleDateString();
                const time = new Date(item.date).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                return `
                    <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; margin-bottom: 10px; border: 1px solid rgba(255,255,255,0.1);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <div style="font-weight: 600; color: inherit;">${item.fileCount} image${item.fileCount > 1 ? 's' : ''} compressed</div>
                            <div style="font-size: 12px; color: #aaa;">${date} ${time}</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 13px; color: #ccc;">
                            <span>${formatFileSize(item.originalSize)} → ${formatFileSize(item.compressedSize)}</span>
                            <span style="color: #4caf50; font-weight: 600;">${item.savings}% saved</span>
                        </div>
                        <div style="font-size: 11px; color: #666; margin-top: 4px;">
                            ${item.format.toUpperCase()} • ${item.quality}% quality
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        document.getElementById('clearHistory').addEventListener('click', () => {
            if (confirm('Are you sure you want to clear all compression history?')) {
                localStorage.removeItem('redusize_history');
                loadCompressionHistory();
                showToast('History cleared successfully');
            }
        });
        
        // Performance monitoring
        window.addEventListener('load', () => {
            if (performance.timing) {
                const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
                console.log('Page load time:', loadTime + 'ms');
            }
        });
    </script>
</body>
</html>